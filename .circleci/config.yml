version: 2.1

jobs:
  build:
    docker: # use the docker executor type; machine and macos executors are also supported
    - image: circleci/node:4.8.2 # the primary container, where your job's commands are run
    dependencies: pre: - echo "export rvm_ignore_gemsets_flag=1" >> ~/.rvmrc - gem install bundler
    steps:
    - checkout # check out the code in the project directory
    - run: echo "hello world" # run the `echo` command
    - run: bundle check --path=vendor/bundle || bundle install --path=vendor/bundle --jobs=4 --retry=3
    - run: mkdir ~/rspec
    - run:
        command: bundle exec rspec --format progress --format RspecJunitFormatter -o ~/rspec/rspec.xml
        when: always
    - store_test_results:
        path: ~/rspec
